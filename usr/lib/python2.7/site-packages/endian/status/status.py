#!/usr/bin/env python  
# encoding: utf-8
#
# +--------------------------------------------------------------------------+
# | Endian Firewall                                                          |
# +--------------------------------------------------------------------------+
# | Copyright (c) 2005-2011 Endian                                           |
# |         Endian GmbH/Srl                                                  |
# |         Bergweg 41 Via Monte                                             |
# |         39057 Eppan/Appiano                                              |
# |         ITALIEN/ITALIA                                                   |
# |         info@endian.com                                                  |
# |                                                                          |
# | emi is free software: you can redistribute it and/or modify it under     |
# | the terms of GNU General Public License (GPL) version 2.0                |
# | when released with the Community edition                                 |
# | or the GNU Lesser General Public License (LGPL) version 2.1              |
# | when released with the Enterprise edition.                               |
# |                                                                          |
# | emi is distributed in the hope that it will be useful,                   |
# | but WITHOUT ANY WARRANTY; without even the implied warranty of           |
# | MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the             |
# | GNU General Public License for more details or the                       |
# | GNU Lesser General Public License for more details.                      |
# |                                                                          |
# | You should have received a copy of the license along with emi.           |
# | If not, see <http://www.gnu.org/licenses/>.                              |
# +--------------------------------------------------------------------------+
#

import time
from endian.core.logger import *
from endian.status.notifications import getNotifications
from endian.emi.status import register

def test(force=False, msg="", *argl, **args):
    """
    ... autofunction::: test

    Test status interface

    Is a sample for a function of the EMI status interface.
    This text is multiline since it describes what exactly
    does this function.

    In this example the function does nothing of interest,
    it simple returns a python structure with some example
    values and parameters if supplied, which then are going
    to be serialized as JSON by the status EMI module.

    This text is only so long and says nothing in the end
    because I want to test the docstring parser with it and
    therefore I would like to have some paragraphs, which are
    separated by empty newlines.

    :param force: Forces something if True, otherwise does not
    force at all.
    :type force: boolean
    :param msg: Specify a cool message
    :type msg: string

    """
    values = {'integer': 42,
              'string': 'hello world',
              'list': [1,2,3],
              'hash': {'a': 'field', 'is': 'a field'},
              'force': force,
              'msg': msg,
              'generated': time.time(),
              }
    values.update(args)
    return values


def init(root=None):
    info("Load test status subsystem of module 'status'")
    register("status.status.test", test)

    info("Load services notifications status interface")
    register("status.notifications.services", getNotifications)
